<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.86.1" />

  <title>Converter lista com data.frame(s) em um data.frame &middot; Rafael Tieppo</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
  
  <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">RafaTieppo</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/project/"><i class='fa fa-briefcase fa-fw'></i>Project</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/teaching/"><i class='fa fa-graduation-cap fa-fw'></i>Teaching</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/rafatieppo" rel="me" target="_blank"><i class="fab fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/rafaeltieppo" rel="me" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://researchgate.net/profile/Rafael-Tieppo" rel="me" target="_blank"><i class="ai ai-researchgate-square ai-1x"></i>researchgate</a>
    </li>
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://orcid.org/0000-0001-8132-4813" rel="me" target="_blank"><i class="ai ai-orcid-square ai-1x"></i>orcid</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://scholar.google.com/citations?user=ClN1Q6AAAAAJ" rel="me" target="_blank"><i class="ai ai-google-scholar ai-1x"></i>google-scholar</a>
    </li>
    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/rafatieppo" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/3109019/rafa" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2021 <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>Licensed CC:By-NC-SA</a></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Converter lista com data.frame(s) em um data.frame</h1>
  <h2></h2>
</div>
<div class="content">
  <h1 id="introdução">Introdução</h1>
<p>Trabalhando com banco de dados, em algum momento torna-se necessária a
extração de determininados elementos que satisfaçam um dada condição. Na
linguagem <strong>R</strong>, uma das opções de se realizar esta operação é a
utilização de <em>listas</em>.</p>
<h1 id="estudo-de-caso">Estudo de caso</h1>
<p>Vamos supor que você tenha um <code>data.frame</code> com três tratamentos e quatro
repetições</p>
<pre><code>DF &lt;-
    data.frame(BLOCO = rep(seq(1,4), each = 12),
               TRAT=rep(c(&quot;T1&quot;, &quot;T2&quot;, &quot;T3&quot;), each = 4),
               REP = seq(1,4),
               Z = rnorm(48, 30, 2.6))

head(DF)
&gt;
##   BLOCO TRAT REP        Z
## 1     1   T1   1 27.34090
## 2     1   T1   2 30.36415
## 3     1   T1   3 31.35214
## 4     1   T1   4 25.11936
## 5     1   T2   1 29.22582
## 6     1   T2   2 29.71030
</code></pre><p>Uma vez que o <code>data.frame</code> foi criado, vamos supor que seja
necessário separar para cada bloco, os valores de cada tratamento entre
as repetições 2 e 3. Para isto podemos criar uma lista de <code>data.frames</code>.</p>
<pre><code>LISTOFDATAFRAME  &lt;- vector(mode = &quot;list&quot;, length = 4)

k=1
for (b in (1:4)) ### from block 1 up to 4
    {    
        LISTOFDATAFRAME[[k]] &lt;-
            sapply(c(&quot;T1&quot;, &quot;T2&quot;, &quot;T3&quot;),
                   function(n)
                       subset(DF,
                              BLOCO == b &amp;
                              TRAT == n)[2:3,],
                   simplify = FALSE)
        k = k+1
        }

### Repare que para entrada da lista há um bloco com os tratamentos
### &quot;T1&quot;, &quot;T2&quot;, &quot;T3&quot; e suas respectivas repetições 2 e 3:

head(LISTOFDATAFRAME)
&gt;
## [[1]]
## [[1]]$T1
##   BLOCO TRAT REP        Z
## 2     1   T1   2 30.36415
## 3     1   T1   3 31.35214
## 
## [[1]]$T2
##   BLOCO TRAT REP        Z
## 6     1   T2   2 29.71030
## 7     1   T2   3 33.59699
## 
## [[1]]$T3
##    BLOCO TRAT REP        Z
## 10     1   T3   2 28.72656
## 11     1   T3   3 29.71134
## 
## 
## [[2]]
## [[2]]$T1
##    BLOCO TRAT REP        Z
## 14     2   T1   2 34.55354
## 15     2   T1   3 29.69425
## 
## [[2]]$T2
##    BLOCO TRAT REP        Z
## 18     2   T2   2 27.48108
## 19     2   T2   3 31.22254
## 
## [[2]]$T3
##    BLOCO TRAT REP        Z
## 22     2   T3   2 30.16999
## 23     2   T3   3 25.35998
## 
## 
## [[3]]
## [[3]]$T1
##    BLOCO TRAT REP        Z
## 26     3   T1   2 27.03317
## 27     3   T1   3 30.34640
## 
## [[3]]$T2
##    BLOCO TRAT REP        Z
## 30     3   T2   2 21.11056
## 31     3   T2   3 32.07944
## 
## [[3]]$T3
##    BLOCO TRAT REP        Z
## 34     3   T3   2 30.83631
## 35     3   T3   3 30.51380
## 
## 
## [[4]]
## [[4]]$T1
##    BLOCO TRAT REP        Z
## 38     4   T1   2 31.63475
## 39     4   T1   3 31.88315
## 
## [[4]]$T2
##    BLOCO TRAT REP        Z
## 42     4   T2   2 26.45181
## 43     4   T2   3 31.26221
## 
## [[4]]$T3
##    BLOCO TRAT REP        Z
## 46     4   T3   2 28.85554
## 47     4   T3   3 31.30958
</code></pre><p>Para unir a lista em um novo <code>data.frame</code> há pelo menos duas opções:</p>
<pre><code>### Primeira opçção:

df1 &lt;-
    sapply(1:3, function(w)
        do.call(rbind, LISTOFDATAFRAME[[w]]),
        simplify = FALSE) 

df1 &lt;-
    do.call(rbind, df1)
df1
&gt;
##       BLOCO TRAT REP        Z
## T1.2      1   T1   2 30.36415
## T1.3      1   T1   3 31.35214
## T2.6      1   T2   2 29.71030
## T2.7      1   T2   3 33.59699
## T3.10     1   T3   2 28.72656
## T3.11     1   T3   3 29.71134
## T1.14     2   T1   2 34.55354
## T1.15     2   T1   3 29.69425
## T2.18     2   T2   2 27.48108
## T2.19     2   T2   3 31.22254
## T3.22     2   T3   2 30.16999
## T3.23     2   T3   3 25.35998
## T1.26     3   T1   2 27.03317
## T1.27     3   T1   3 30.34640
## T2.30     3   T2   2 21.11056
## T2.31     3   T2   3 32.07944
## T3.34     3   T3   2 30.83631
## T3.35     3   T3   3 30.51380
</code></pre><pre><code>### Segunda opção, pacote dplyr
#library(dplyr)

df2 &lt;- do.call(&quot;bind_rows&quot;, LISTOFDATAFRAME)
df2
&gt;
##    BLOCO TRAT REP        Z
## 1      1   T1   2 30.36415
## 2      1   T1   3 31.35214
## 3      1   T2   2 29.71030
## 4      1   T2   3 33.59699
## 5      1   T3   2 28.72656
## 6      1   T3   3 29.71134
## 7      2   T1   2 34.55354
## 8      2   T1   3 29.69425
## 9      2   T2   2 27.48108
## 10     2   T2   3 31.22254
## 11     2   T3   2 30.16999
## 12     2   T3   3 25.35998
## 13     3   T1   2 27.03317
## 14     3   T1   3 30.34640
## 15     3   T2   2 21.11056
## 16     3   T2   3 32.07944
## 17     3   T3   2 30.83631
## 18     3   T3   3 30.51380
## 19     4   T1   2 31.63475
## 20     4   T1   3 31.88315
## 21     4   T2   2 26.45181
## 22     4   T2   3 31.26221
## 23     4   T3   2 28.85554
## 24     4   T3   3 31.30958
</code></pre><p>Ambas as soluções retornam um <code>data.frame</code> com os dados
selecionados. Dependendo do tamanho do banco de dados pode haver
diferença de tempo no processamento, maiores detalhes podem ser
encontrados nas referências.</p>
<blockquote>
<p>Sem dados você é apenas mais uma pessoa com uma opinião.
<em>W. Edwards Deming (1900-1993)</em></p>
</blockquote>
<h2 id="referências">Referências</h2>
<p><a href="http://stackoverflow.com/questions/2851327/convert-a-list-of-data-frames-into-one-data-frame">Convert a list of data frames into one data frame</a>
<a href="https://www.r-bloggers.com/concatenating-a-list-of-data-frames/">Concatenating a list of data frames</a></p>

</div>

</div>
</div>
<script src="/js/ui.js"></script>
<script src="/js/menus.js"></script>


<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-rafatieppo-github-io';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33432733-8', 'auto');
    ga('send', 'pageview');
  }
</script>





<script src="/js/math-code.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

